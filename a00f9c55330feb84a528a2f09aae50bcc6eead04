{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8161a5f9_bca83d19",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6472
      },
      "writtenOn": "2021-04-10T08:26:33Z",
      "side": 1,
      "message": "\nDear Sameer, dear Alex,\n\nI\u0027m adding you as reviewers because you seem to have written the documentation.  This patch is more of a RFC as I\u0027m not sure I understand the documentation correctly.  First a little background: I was compiling one of our projects with EIGEN_MPL2_ONLY to make sure that we comply with all licenses, and was surprised to find that ceres stopped building.  So this is what I came up with in response.\n\nWith default settings, ceres pulls in Eigen\u0027s sparse matrix library which is LGPL.  (Maybe not in its entirety, but that doesn\u0027t matter once the parts are combined.)  So ceres by default isn\u0027t BSD-3 but LGPL, which I don\u0027t think is what is intended for a library that advertises itself as BSD-3.  Now, I could live with that if it were pointed out clearly in the documentation.  It isn\u0027t in two ways:\n\n1. mention of the LGPL license is missing: I\u0027m adding that in this patch\n2. the documentation appears contradictory (I think I can parse it correctly, but I\u0027d like to confirm before fixing the phrasing): EIGENSPARSE is ON by default but it\u0027s not used.  I take this to mean that the Sparse library can be selected at runtime, but that doesn\u0027t alleviate the license concerns of course.  So if I understand it correctly, a better wording would perhaps be: \"Enable Eigen as an alternative for sparse matrix linear algebra.  See \u003cpointer to relevant docs\u003e for how to select a sparse matrix library at runtime.\"\n\nI\u0027m very interested in having your feedback.\n\nBest regards,\n- Tobi",
      "revId": "a00f9c55330feb84a528a2f09aae50bcc6eead04",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4255376d_c2f7eb9c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5155
      },
      "writtenOn": "2021-04-12T18:06:43Z",
      "side": 1,
      "message": "Interesting, thanks Tobias I will have a look - but I think it _should_ be fine since 2019, what version of Eigen are you using to test this?",
      "revId": "a00f9c55330feb84a528a2f09aae50bcc6eead04",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "17375470_3f588dce",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5155
      },
      "writtenOn": "2021-04-12T19:10:36Z",
      "side": 1,
      "message": "OK, so I had another look at this and the issue persists through the latest release of Eigen (3.3.9) even though that was released in December 2020, and the licensing change happened in master in Feb 2019.  It\u0027s unclear exactly what happened there.\n\nSo in short, from the *next* Eigen release (or if you are using master), it should be MPL and there won\u0027t be a problem.  However, up to and including 3.3.9 we could add a disclaimer in the CMake output about the licensing (we used to do this prior to the previous MPL update) and update the docs, but highlight that this should be fixed in future versions of Eigen.",
      "revId": "a00f9c55330feb84a528a2f09aae50bcc6eead04",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "63d457fe_b80a116a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6472
      },
      "writtenOn": "2021-04-13T03:51:25Z",
      "side": 1,
      "message": "Hi Alex, Sameer,\nthank you for the quick response.  May I also suggest to unconditionally define EIGEN_MPL2_ONLY when using Eigen to ensure that this doesn\u0027t slip in unintentionally as it seems to have?\n\nBelow are the build errors I get when trying to compile the current ceres trunk with Eigen 3.3.9 and EIGEN_MPL2_ONLY.  I tend to take the Eigen developers word if they tell me that I\u0027m using non-MPL2 code:\n\n[build] [61/100 590.804s r6] Building CXX object internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx.o\n[build] FAILED: internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx.o \n[build] /usr/bin/clang++ -DCERES_CXSPARSE_VERSION\u003d\\\"3.2.0\\\" -DCERES_SUITESPARSE_VERSION\u003d\\\"5.8.1\\\" -DEIGEN_MPL2_ONLY\u003d1 -DGFLAGS_IS_A_DLL\u003d0 -DGOOGLE_GLOG_DLL_DECL\u003d\"\" -DGOOGLE_GLOG_DLL_DECL_FOR_UNITTESTS\u003d\"\" -Iconfig -I../internal -I../include -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX11.1.sdk/System/Library/Frameworks/Accelerate.framework/Headers -isystem /usr/local/include -isystem /usr/local/include/eigen3 -Wmissing-declarations -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-missing-field-initializers -Qunused-arguments -mllvm -inline-threshold\u003d600 -Wno-return-type-c-linkage -O3 -DNDEBUG -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX11.1.sdk -fPIC -std\u003dgnu++14 -MD -MT internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx.o -MF internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx.o.d -o internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx.o -c internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx:7:\n[build] /Users/tobi/src/ceres-solver/internal/ceres/reorder_program.cc:198:10: error: no template named \u0027AMDOrdering\u0027 in namespace \u0027Eigen\u0027; did you mean \u0027COLAMDOrdering\u0027?\n[build]   Eigen::AMDOrdering\u003cint\u003e amd_ordering;\n[build]   ~~~~~~~^~~~~~~~~~~\n[build]          COLAMDOrdering\n[build] /usr/local/include/eigen3/Eigen/src/OrderingMethods/Ordering.h:118:7: note: \u0027COLAMDOrdering\u0027 declared here\n[build] class COLAMDOrdering\n[build]       ^\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx:7:\n[build] /Users/tobi/src/ceres-solver/internal/ceres/reorder_program.cc:401:10: error: no template named \u0027AMDOrdering\u0027 in namespace \u0027Eigen\u0027; did you mean \u0027COLAMDOrdering\u0027?\n[build]   Eigen::AMDOrdering\u003cint\u003e amd_ordering;\n[build]   ~~~~~~~^~~~~~~~~~~\n[build]          COLAMDOrdering\n[build] /usr/local/include/eigen3/Eigen/src/OrderingMethods/Ordering.h:118:7: note: \u0027COLAMDOrdering\u0027 declared here\n[build] class COLAMDOrdering\n[build]       ^\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx:10:\n[build] In file included from /Users/tobi/src/ceres-solver/internal/ceres/schur_complement_solver.cc:31:\n[build] In file included from ../internal/ceres/schur_complement_solver.h:50:\n[build] /usr/local/include/eigen3/Eigen/SparseCholesky:34:2: error: The SparseCholesky module has nothing to offer in MPL2 only mode\n[build] #error The SparseCholesky module has nothing to offer in MPL2 only mode\n[build]  ^\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx:10:\n[build] In file included from /Users/tobi/src/ceres-solver/internal/ceres/schur_complement_solver.cc:31:\n[build] In file included from ../internal/ceres/schur_complement_solver.h:50:\n[build] In file included from /usr/local/include/eigen3/Eigen/SparseCholesky:37:\n[build] /usr/local/include/eigen3/Eigen/src/SparseCholesky/SimplicialCholesky.h:266:72: error: no template named \u0027AMDOrdering\u0027; did you mean \u0027COLAMDOrdering\u0027?\n[build] template\u003ctypename _MatrixType, int _UpLo \u003d Lower, typename _Ordering \u003d AMDOrdering\u003ctypename _MatrixType::StorageIndex\u003e \u003e class SimplicialLLT;\n[build]                                                                        ^\n[build] /usr/local/include/eigen3/Eigen/src/OrderingMethods/Ordering.h:118:7: note: \u0027COLAMDOrdering\u0027 declared here\n[build] class COLAMDOrdering\n[build]       ^\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx:10:\n[build] In file included from /Users/tobi/src/ceres-solver/internal/ceres/schur_complement_solver.cc:31:\n[build] In file included from ../internal/ceres/schur_complement_solver.h:50:\n[build] In file included from /usr/local/include/eigen3/Eigen/SparseCholesky:37:\n[build] /usr/local/include/eigen3/Eigen/src/SparseCholesky/SimplicialCholesky.h:267:72: error: no template named \u0027AMDOrdering\u0027; did you mean \u0027COLAMDOrdering\u0027?\n[build] template\u003ctypename _MatrixType, int _UpLo \u003d Lower, typename _Ordering \u003d AMDOrdering\u003ctypename _MatrixType::StorageIndex\u003e \u003e class SimplicialLDLT;\n[build]                                                                        ^\n[build] /usr/local/include/eigen3/Eigen/src/OrderingMethods/Ordering.h:118:7: note: \u0027COLAMDOrdering\u0027 declared here\n[build] class COLAMDOrdering\n[build]       ^\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_9_cxx.cxx:10:\n[build] In file included from /Users/tobi/src/ceres-solver/internal/ceres/schur_complement_solver.cc:31:\n[build] In file included from ../internal/ceres/schur_complement_solver.h:50:\n[build] In file included from /usr/local/include/eigen3/Eigen/SparseCholesky:37:\n[build] /usr/local/include/eigen3/Eigen/src/SparseCholesky/SimplicialCholesky.h:268:72: error: no template named \u0027AMDOrdering\u0027; did you mean \u0027COLAMDOrdering\u0027?\n[build] template\u003ctypename _MatrixType, int _UpLo \u003d Lower, typename _Ordering \u003d AMDOrdering\u003ctypename _MatrixType::StorageIndex\u003e \u003e class SimplicialCholesky;\n[build]                                                                        ^\n[build] /usr/local/include/eigen3/Eigen/src/OrderingMethods/Ordering.h:118:7: note: \u0027COLAMDOrdering\u0027 declared here\n[build] class COLAMDOrdering\n[build]       ^\n[build] 6 errors generated.\n[build] [62/100 595.267s r5] Building CXX object internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx.o\n[build] FAILED: internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx.o \n[build] /usr/bin/clang++ -DCERES_CXSPARSE_VERSION\u003d\\\"3.2.0\\\" -DCERES_SUITESPARSE_VERSION\u003d\\\"5.8.1\\\" -DEIGEN_MPL2_ONLY\u003d1 -DGFLAGS_IS_A_DLL\u003d0 -DGOOGLE_GLOG_DLL_DECL\u003d\"\" -DGOOGLE_GLOG_DLL_DECL_FOR_UNITTESTS\u003d\"\" -Iconfig -I../internal -I../include -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX11.1.sdk/System/Library/Frameworks/Accelerate.framework/Headers -isystem /usr/local/include -isystem /usr/local/include/eigen3 -Wmissing-declarations -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-missing-field-initializers -Qunused-arguments -mllvm -inline-threshold\u003d600 -Wno-return-type-c-linkage -O3 -DNDEBUG -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX11.1.sdk -fPIC -std\u003dgnu++14 -MD -MT internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx.o -MF internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx.o.d -o internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx.o -c internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx:8:\n[build] In file included from /Users/tobi/src/ceres-solver/internal/ceres/linear_solver.cc:38:\n[build] In file included from ../internal/ceres/schur_complement_solver.h:50:\n[build] /usr/local/include/eigen3/Eigen/SparseCholesky:34:2: error: The SparseCholesky module has nothing to offer in MPL2 only mode\n[build] #error The SparseCholesky module has nothing to offer in MPL2 only mode\n[build]  ^\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx:8:\n[build] In file included from /Users/tobi/src/ceres-solver/internal/ceres/linear_solver.cc:38:\n[build] In file included from ../internal/ceres/schur_complement_solver.h:50:\n[build] In file included from /usr/local/include/eigen3/Eigen/SparseCholesky:37:\n[build] /usr/local/include/eigen3/Eigen/src/SparseCholesky/SimplicialCholesky.h:266:72: error: no template named \u0027AMDOrdering\u0027; did you mean \u0027COLAMDOrdering\u0027?\n[build] template\u003ctypename _MatrixType, int _UpLo \u003d Lower, typename _Ordering \u003d AMDOrdering\u003ctypename _MatrixType::StorageIndex\u003e \u003e class SimplicialLLT;\n[build]                                                                        ^\n[build] /usr/local/include/eigen3/Eigen/src/OrderingMethods/Ordering.h:118:7: note: \u0027COLAMDOrdering\u0027 declared here\n[build] class COLAMDOrdering\n[build]       ^\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx:8:\n[build] In file included from /Users/tobi/src/ceres-solver/internal/ceres/linear_solver.cc:38:\n[build] In file included from ../internal/ceres/schur_complement_solver.h:50:\n[build] In file included from /usr/local/include/eigen3/Eigen/SparseCholesky:37:\n[build] /usr/local/include/eigen3/Eigen/src/SparseCholesky/SimplicialCholesky.h:267:72: error: no template named \u0027AMDOrdering\u0027; did you mean \u0027COLAMDOrdering\u0027?\n[build] template\u003ctypename _MatrixType, int _UpLo \u003d Lower, typename _Ordering \u003d AMDOrdering\u003ctypename _MatrixType::StorageIndex\u003e \u003e class SimplicialLDLT;\n[build]                                                                        ^\n[build] /usr/local/include/eigen3/Eigen/src/OrderingMethods/Ordering.h:118:7: note: \u0027COLAMDOrdering\u0027 declared here\n[build] class COLAMDOrdering\n[build]       ^\n[build] In file included from internal/ceres/CMakeFiles/ceres.dir/Unity/unity_7_cxx.cxx:8:\n[build] In file included from /Users/tobi/src/ceres-solver/internal/ceres/linear_solver.cc:38:\n[build] In file included from ../internal/ceres/schur_complement_solver.h:50:\n[build] In file included from /usr/local/include/eigen3/Eigen/SparseCholesky:37:\n[build] /usr/local/include/eigen3/Eigen/src/SparseCholesky/SimplicialCholesky.h:268:72: error: no template named \u0027AMDOrdering\u0027; did you mean \u0027COLAMDOrdering\u0027?\n[build] template\u003ctypename _MatrixType, int _UpLo \u003d Lower, typename _Ordering \u003d AMDOrdering\u003ctypename _MatrixType::StorageIndex\u003e \u003e class SimplicialCholesky;\n[build]                                                                        ^\n[build] /usr/local/include/eigen3/Eigen/src/OrderingMethods/Ordering.h:118:7: note: \u0027COLAMDOrdering\u0027 declared here\n[build] class COLAMDOrdering\n[build]       ^\n[build] 4 errors generated.\n\nBest regards,\n- Tobi",
      "parentUuid": "17375470_3f588dce",
      "revId": "a00f9c55330feb84a528a2f09aae50bcc6eead04",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f63c5a2a_04589fef",
        "filename": "docs/source/installation.rst",
        "patchSetId": 1
      },
      "lineNbr": 671,
      "author": {
        "id": 5002
      },
      "writtenOn": "2021-04-12T15:56:45Z",
      "side": 1,
      "message": "this is not true anymore.",
      "range": {
        "startLine": 671,
        "startChar": 30,
        "endLine": 671,
        "endChar": 43
      },
      "revId": "a00f9c55330feb84a528a2f09aae50bcc6eead04",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8275382b_b26ceef0",
        "filename": "docs/source/installation.rst",
        "patchSetId": 1
      },
      "lineNbr": 671,
      "author": {
        "id": 5155
      },
      "writtenOn": "2021-04-12T18:06:43Z",
      "side": 1,
      "message": "For context, it was changed in 2019 when Google paid Tim Davis to have it licensed under the MPL, see here: https://gitlab.com/libeigen/eigen/-/commit/1dc1677d525b1df3cc32b3df5cd816e150b07185",
      "parentUuid": "f63c5a2a_04589fef",
      "range": {
        "startLine": 671,
        "startChar": 30,
        "endLine": 671,
        "endChar": 43
      },
      "revId": "a00f9c55330feb84a528a2f09aae50bcc6eead04",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    }
  ]
}