{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5ca7b897_a34ebc1c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T14:13:46Z",
      "side": 1,
      "message": "CuSolver Dense Cholesky is up for review - thanks!",
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c4325c9f_aaf3cbae",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "Joydeep,\nFirst round of comments, I have not taken a deep look at dense_cuda_solver.h/cc because I think you should move that class into cuda_dense_cholesky. This will reduce one level of indirection and code.",
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f293458c_0516c6b4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "Thanks, Sameer. \nI addressed all except the abstraction for DenseCudaSolver (rationale included inline) - let\u0027s discuss.",
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "257ca8ae_030aa708",
        "filename": "CMakeLists.txt",
        "patchSetId": 1
      },
      "lineNbr": 274,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:22:35Z",
      "side": 1,
      "message": "CERES_CUDA_VERSION_LT_11_1 maybe?",
      "range": {
        "startLine": 274,
        "startChar": 23,
        "endLine": 274,
        "endChar": 37
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c6847cb8_ba048f1d",
        "filename": "CMakeLists.txt",
        "patchSetId": 1
      },
      "lineNbr": 274,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "257ca8ae_030aa708",
      "range": {
        "startLine": 274,
        "startChar": 23,
        "endLine": 274,
        "endChar": 37
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06d6cfe1_9ade16e3",
        "filename": "include/ceres/types.h",
        "patchSetId": 1
      },
      "lineNbr": 189,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "is the plan that when we add sparse cuda support it will be called CUDA_SPARSE ?",
      "range": {
        "startLine": 189,
        "startChar": 2,
        "endLine": 189,
        "endChar": 6
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68db7fe0_6fe9ed44",
        "filename": "include/ceres/types.h",
        "patchSetId": 1
      },
      "lineNbr": 189,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "Yes, that is correct.",
      "parentUuid": "06d6cfe1_9ade16e3",
      "range": {
        "startLine": 189,
        "startChar": 2,
        "endLine": 189,
        "endChar": 6
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33ad0067_c304b6ca",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "I do not think cuda_helpers.h is a good name, it is better to just call this cuda_buffer.h",
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b5e55485_87d7f674",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "33ad0067_c304b6ca",
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "372dfd09_d534c985",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "why not use default initializers for this?",
      "range": {
        "startLine": 46,
        "startChar": 17,
        "endLine": 46,
        "endChar": 22
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6a4f31c9_18a92d72",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "372dfd09_d534c985",
      "range": {
        "startLine": 46,
        "startChar": 17,
        "endLine": 46,
        "endChar": 22
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6cdff866_12a639d9",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "use CHECK(data_ !\u003d nullptr) instead. same below.",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 19
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a27e2a4_d28374cc",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "Will do, but just to understand - why does Ceres not use the CHECK_NOTNULL macro?",
      "parentUuid": "6cdff866_12a639d9",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 19
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b1078e5_59582680",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:53:23Z",
      "side": 1,
      "message": "because the google internal version of glog does not have this macro anymore.",
      "parentUuid": "5a27e2a4_d28374cc",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 19
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3aa0bed3_9b4fc173",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 92,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "data_ \u003d nullptr;\nsize_ \u003d 0;",
      "range": {
        "startLine": 92,
        "startChar": 5,
        "endLine": 92,
        "endChar": 10
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a267e72a_66eabbb6",
        "filename": "internal/ceres/cuda_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 92,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3aa0bed3_9b4fc173",
      "range": {
        "startLine": 92,
        "startChar": 5,
        "endLine": 92,
        "endChar": 10
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4807ad93_a4cefa0b",
        "filename": "internal/ceres/dense_cholesky.h",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "why do you need execution_summary.h?",
      "range": {
        "startLine": 43,
        "startChar": 16,
        "endLine": 43,
        "endChar": 33
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22d71ddc_52e122b3",
        "filename": "internal/ceres/dense_cholesky.h",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "My mistake - left over from some dev profiling instrumentation. I\u0027ll remove it.",
      "parentUuid": "4807ad93_a4cefa0b",
      "range": {
        "startLine": 43,
        "startChar": 16,
        "endLine": 43,
        "endChar": 33
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65dd6f5b_83deeba1",
        "filename": "internal/ceres/dense_cholesky.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "why do you need map_util.h here?",
      "range": {
        "startLine": 45,
        "startChar": 10,
        "endLine": 45,
        "endChar": 15
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0694c307_5a884a5d",
        "filename": "internal/ceres/dense_cholesky.h",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "My mistake - left over from some dev profiling instrumentation. I\u0027ll remove it.",
      "parentUuid": "65dd6f5b_83deeba1",
      "range": {
        "startLine": 45,
        "startChar": 10,
        "endLine": 45,
        "endChar": 15
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c704e6a_8b884e77",
        "filename": "internal/ceres/dense_cuda_solver.cc",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:22:35Z",
      "side": 1,
      "message": "this ifdef should have CERES_ prefix.\nalso given the heavy ifdefing here instead of interleaving this have two completely independent implementations?  because otherwise keeping track of what objects apply to which ifdef gets crazy quickly.",
      "range": {
        "startLine": 89,
        "startChar": 7,
        "endLine": 89,
        "endChar": 20
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2dd3b034_d1d580b6",
        "filename": "internal/ceres/dense_cuda_solver.cc",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "Hmm. Good point. This can be done at the level of the DenseCudaSolver abstraction then. I\u0027m going to keep this open to revisit as we work through the rest of the changes, and until the DenseCudaSolver abstraction is resolved.",
      "parentUuid": "7c704e6a_8b884e77",
      "range": {
        "startLine": 89,
        "startChar": 7,
        "endLine": 89,
        "endChar": 20
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ad5227a_cf3cfa45",
        "filename": "internal/ceres/dense_cuda_solver.cc",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:53:23Z",
      "side": 1,
      "message": "I will make an even more radical suggestion.\nhave two different CudaDenseCholesky classes, one for pre11 api and one for post11.1 api. \nthere is also the question of what minimum cuda version we should support.. and is 11.1 too new to just support it?",
      "parentUuid": "2dd3b034_d1d580b6",
      "range": {
        "startLine": 89,
        "startChar": 7,
        "endLine": 89,
        "endChar": 20
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5db9a857_17ddd303",
        "filename": "internal/ceres/dense_cuda_solver.h",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:14:25Z",
      "side": 1,
      "message": "I think you have one abstraction too many.\nThis is the class that should implement DenseCholesky, rather than having CUDADenseCholesky being one more wrapper around this class.",
      "range": {
        "startLine": 54,
        "startChar": 6,
        "endLine": 54,
        "endChar": 21
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec7156a7_7aec6827",
        "filename": "internal/ceres/dense_cuda_solver.h",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 5135
      },
      "writtenOn": "2022-02-03T16:47:56Z",
      "side": 1,
      "message": "The goal is to us the same class to expose other dense solver functionality in the future as well, such as QR (I already have work on this in a branch). There is a fair bit of common overhead such as handling the buffers, cusholver handles, etc. Hence this class would reduce duplicated code between them.",
      "parentUuid": "5db9a857_17ddd303",
      "range": {
        "startLine": 54,
        "startChar": 6,
        "endLine": 54,
        "endChar": 21
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f9cd852_7a42c36e",
        "filename": "internal/ceres/dense_cuda_solver.h",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-02-03T16:53:23Z",
      "side": 1,
      "message": "I think you are better off making those common functions along the lines of suitesparse.h/suitesparse.cc cxsparse.h/cxsparse.cc which are stateless functions doing utility things. \n\nBut other than that the logic of densecudasolver as it exists is simple enough that its not worth sharing too much.\n\nalso it leads to weirdo semantics if you have qr and cholesky in the same class, you will have to carefully document and check all sorts of error handling.",
      "parentUuid": "ec7156a7_7aec6827",
      "range": {
        "startLine": 54,
        "startChar": 6,
        "endLine": 54,
        "endChar": 21
      },
      "revId": "dcde63cbd4224388056b735b9d8998ab1f33b481",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    }
  ]
}