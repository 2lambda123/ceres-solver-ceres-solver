{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "57fc31df_49739f09",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6141
      },
      "writtenOn": "2022-11-13T18:57:41Z",
      "side": 1,
      "message": "Added parallel left products to partitioned matrix view.\n\nResults for E part are greater because of the order of residual blocks (next cell in column-block is located at a constant offset from the current one).\n\nFor F part there is a huge performance gap between 1 and 2 threads (both with/without \"fair\" partitioning); I haven\u0027t investigated it yet.\n\nThere also seem to be a limit because of lack of parallelization somewhere else: when running bundle_adjuster with 28 threads I get quite small average CPU load (about 300%).\n\n\nIn my experiments left products for partitioned view do not have large impact on the whole runtime of optimization.\n\n```\n2022-11-13T15:56:08+03:00\nRunning ./bin/evaluation_benchmark\nRun on (112 X 2242.73 MHz CPU s)\nCPU Caches:\n  L1 Data 32 KiB (x56)\n  L1 Instruction 32 KiB (x56)\n  L2 Unified 1024 KiB (x56)\n  L3 Unified 39424 KiB (x2)\nLoad Average: 10.09, 7.89, 9.90\n--------------------------------------------------------------------------------------------------------------------------------------\nBenchmark                                                                                                            Time   Iterations\n--------------------------------------------------------------------------------------------------------------------------------------\nJacobianPartitionedLeftMultiplyAndAccumulateF\u003cfinal/problem-13682-4456117-pre.txt\u003e/1_median                       587 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cfinal/problem-13682-4456117-pre.txt\u003e/1_median          590 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cfinal/problem-13682-4456117-pre.txt\u003e/2_median         1631 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cfinal/problem-13682-4456117-pre.txt\u003e/4_median          849 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cfinal/problem-13682-4456117-pre.txt\u003e/8_median          450 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cfinal/problem-13682-4456117-pre.txt\u003e/16_median         249 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cfinal/problem-13682-4456117-pre.txt\u003e/28_median         234 ms           10\n\nJacobianPartitionedLeftMultiplyAndAccumulateE\u003cfinal/problem-13682-4456117-pre.txt\u003e/1_median                       310 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cfinal/problem-13682-4456117-pre.txt\u003e/1_median          313 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cfinal/problem-13682-4456117-pre.txt\u003e/2_median         99.8 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cfinal/problem-13682-4456117-pre.txt\u003e/4_median         52.9 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cfinal/problem-13682-4456117-pre.txt\u003e/8_median         29.6 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cfinal/problem-13682-4456117-pre.txt\u003e/16_median        21.1 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cfinal/problem-13682-4456117-pre.txt\u003e/28_median        20.7 ms           10\n\n\n--------------------------------------------------------------------------------------------------------------------------------------\n\nJacobianPartitionedLeftMultiplyAndAccumulateF\u003cvenice/problem-1778-993923-pre.txt\u003e/1_median                       93.8 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cvenice/problem-1778-993923-pre.txt\u003e/1_median          92.6 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cvenice/problem-1778-993923-pre.txt\u003e/2_median           237 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cvenice/problem-1778-993923-pre.txt\u003e/4_median           126 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cvenice/problem-1778-993923-pre.txt\u003e/8_median          66.6 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cvenice/problem-1778-993923-pre.txt\u003e/16_median         38.7 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cvenice/problem-1778-993923-pre.txt\u003e/28_median         35.3 ms           10\n\nJacobianPartitionedLeftMultiplyAndAccumulateE\u003cvenice/problem-1778-993923-pre.txt\u003e/1_median                       50.6 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cvenice/problem-1778-993923-pre.txt\u003e/1_median          51.7 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cvenice/problem-1778-993923-pre.txt\u003e/2_median          17.3 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cvenice/problem-1778-993923-pre.txt\u003e/4_median          9.47 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cvenice/problem-1778-993923-pre.txt\u003e/8_median          5.59 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cvenice/problem-1778-993923-pre.txt\u003e/16_median         4.39 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cvenice/problem-1778-993923-pre.txt\u003e/28_median         4.51 ms           10\n\n--------------------------------------------------------------------------------------------------------------------------------------\n\nJacobianPartitionedLeftMultiplyAndAccumulateF\u003cladybug/problem-1723-156502-pre.txt\u003e/1_median                      12.0 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cladybug/problem-1723-156502-pre.txt\u003e/1_median         12.0 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cladybug/problem-1723-156502-pre.txt\u003e/2_median         26.7 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cladybug/problem-1723-156502-pre.txt\u003e/4_median         13.8 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cladybug/problem-1723-156502-pre.txt\u003e/8_median         7.80 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cladybug/problem-1723-156502-pre.txt\u003e/16_median        4.14 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cladybug/problem-1723-156502-pre.txt\u003e/28_median        3.76 ms           10\n\nJacobianPartitionedLeftMultiplyAndAccumulateE\u003cladybug/problem-1723-156502-pre.txt\u003e/1_median                      6.86 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cladybug/problem-1723-156502-pre.txt\u003e/1_median         6.80 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cladybug/problem-1723-156502-pre.txt\u003e/2_median         2.05 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cladybug/problem-1723-156502-pre.txt\u003e/4_median         1.15 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cladybug/problem-1723-156502-pre.txt\u003e/8_median        0.718 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cladybug/problem-1723-156502-pre.txt\u003e/16_median       0.573 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cladybug/problem-1723-156502-pre.txt\u003e/28_median       0.733 ms           10\n\n--------------------------------------------------------------------------------------------------------------------------------------\n\nJacobianPartitionedLeftMultiplyAndAccumulateF\u003cdubrovnik/problem-356-226730-pre.txt\u003e/1_median                     22.0 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cdubrovnik/problem-356-226730-pre.txt\u003e/1_median        23.3 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cdubrovnik/problem-356-226730-pre.txt\u003e/2_median        55.7 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cdubrovnik/problem-356-226730-pre.txt\u003e/4_median        30.6 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cdubrovnik/problem-356-226730-pre.txt\u003e/8_median        15.9 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cdubrovnik/problem-356-226730-pre.txt\u003e/16_median       8.59 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003cdubrovnik/problem-356-226730-pre.txt\u003e/28_median       7.99 ms           10\n\nJacobianPartitionedLeftMultiplyAndAccumulateE\u003cdubrovnik/problem-356-226730-pre.txt\u003e/1_median                     12.9 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cdubrovnik/problem-356-226730-pre.txt\u003e/1_median        12.3 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cdubrovnik/problem-356-226730-pre.txt\u003e/2_median        3.72 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cdubrovnik/problem-356-226730-pre.txt\u003e/4_median        2.07 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cdubrovnik/problem-356-226730-pre.txt\u003e/8_median        1.23 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cdubrovnik/problem-356-226730-pre.txt\u003e/16_median       1.00 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003cdubrovnik/problem-356-226730-pre.txt\u003e/28_median       1.19 ms           10\n\n--------------------------------------------------------------------------------------------------------------------------------------\n\nJacobianPartitionedLeftMultiplyAndAccumulateF\u003ctrafalgar/problem-257-65132-pre.txt\u003e/1_median                      3.75 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003ctrafalgar/problem-257-65132-pre.txt\u003e/1_median         3.70 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003ctrafalgar/problem-257-65132-pre.txt\u003e/2_median         4.42 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003ctrafalgar/problem-257-65132-pre.txt\u003e/4_median         2.43 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003ctrafalgar/problem-257-65132-pre.txt\u003e/8_median         1.61 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003ctrafalgar/problem-257-65132-pre.txt\u003e/16_median        1.06 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeF\u003ctrafalgar/problem-257-65132-pre.txt\u003e/28_median        1.09 ms           10\n\nJacobianPartitionedLeftMultiplyAndAccumulateE\u003ctrafalgar/problem-257-65132-pre.txt\u003e/1_median                      1.79 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003ctrafalgar/problem-257-65132-pre.txt\u003e/1_median         1.76 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003ctrafalgar/problem-257-65132-pre.txt\u003e/2_median        0.565 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003ctrafalgar/problem-257-65132-pre.txt\u003e/4_median        0.372 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003ctrafalgar/problem-257-65132-pre.txt\u003e/8_median        0.260 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003ctrafalgar/problem-257-65132-pre.txt\u003e/16_median       0.262 ms           10\nJacobianPartitionedLeftMultiplyAndAccumulateWithTransposeE\u003ctrafalgar/problem-257-65132-pre.txt\u003e/28_median       0.443 ms           10\n\n--------------------------------------------------------------------------------------------------------------------------------------\n```",
      "revId": "7f91249011103de971bce2bc93148b1b06371e9f",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    }
  ]
}