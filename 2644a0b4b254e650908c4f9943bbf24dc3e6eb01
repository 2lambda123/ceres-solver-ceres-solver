{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "62b3deea_4e337207",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5435
      },
      "writtenOn": "2022-09-20T18:21:43Z",
      "side": 1,
      "message": "I think it is a good idea to not lock when you don\u0027t need to. Not sure if the syntax can be improved since from the macro it is hard to understand what code is being inserted.",
      "revId": "2644a0b4b254e650908c4f9943bbf24dc3e6eb01",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f6d5a84d_f0a5bc04",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-09-20T20:48:40Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "62b3deea_4e337207",
      "revId": "2644a0b4b254e650908c4f9943bbf24dc3e6eb01",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9555d249_cea9f424",
        "filename": "internal/ceres/parallel_for.h",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 6612
      },
      "writtenOn": "2022-09-20T18:31:58Z",
      "side": 1,
      "message": "Better use a free function instead:\n```\ninline decltype(auto) MakeConditionalLock(int num_threads, std::mutex\u0026 m)\n{\n   return (num_threads \u003d\u003d 1) ? std::unique_lock\u003cstd::mutex\u003e{}\n                             : std::unique_lock\u003cstd::mutex\u003e{m};\n}\n```",
      "range": {
        "startLine": 44,
        "startChar": 8,
        "endLine": 44,
        "endChar": 42
      },
      "revId": "2644a0b4b254e650908c4f9943bbf24dc3e6eb01",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "890e077a_99670364",
        "filename": "internal/ceres/parallel_for.h",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-09-20T20:48:10Z",
      "side": 1,
      "message": "thanks, free function \u003e\u003e macro.",
      "parentUuid": "9555d249_cea9f424",
      "range": {
        "startLine": 44,
        "startChar": 8,
        "endLine": 44,
        "endChar": 42
      },
      "revId": "2644a0b4b254e650908c4f9943bbf24dc3e6eb01",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecaedfd4_0592520f",
        "filename": "internal/ceres/schur_eliminator_impl.h",
        "patchSetId": 2
      },
      "lineNbr": 379,
      "author": {
        "id": 6141
      },
      "writtenOn": "2022-09-20T19:35:48Z",
      "side": 1,
      "message": "By the way, in the case of rhs update - is it viable to avoid synchronization by computing num_threads separate updates in parallel and then doing parallel reduction?\n\nOr simultaneous synchronization on the same block are relatively rare to compensate for additional cost of reduction?",
      "range": {
        "startLine": 379,
        "startChar": 63,
        "endLine": 379,
        "endChar": 72
      },
      "revId": "2644a0b4b254e650908c4f9943bbf24dc3e6eb01",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "269312eb_5074e3cc",
        "filename": "internal/ceres/schur_eliminator_impl.h",
        "patchSetId": 2
      },
      "lineNbr": 379,
      "author": {
        "id": 5002
      },
      "writtenOn": "2022-09-20T20:48:10Z",
      "side": 1,
      "message": "I think you can do that, but the rhs computation barely shows up in measurements, all the time is spent in accumulating the schur complement.",
      "parentUuid": "ecaedfd4_0592520f",
      "range": {
        "startLine": 379,
        "startChar": 63,
        "endLine": 379,
        "endChar": 72
      },
      "revId": "2644a0b4b254e650908c4f9943bbf24dc3e6eb01",
      "serverId": "cdcfcfbe-2044-3b1f-b5d4-da77ad542329"
    }
  ]
}